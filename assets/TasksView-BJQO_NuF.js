import{_ as O,c,o as s,a as e,d as j,u as N,r as $,s as A,b as D,w as Q,n as g,e as x,f as X,v as Z,g as h,h as q,t as b,F as T,i as L,j as v,C as ee,k as w,A as E,l as te,m as C,D as ae,S as V,p as se,q as oe}from"./index-Commcp5v.js";import{C as ne}from"./flatpickr-N-2Wrb50.js";const ce={},le={class:"card__color-bar-wave",width:"100%",height:"10"};function re(i,t){return s(),c("svg",le,t[0]||(t[0]=[e("g",{fill:"none","fill-rule":"nonzero","stroke-linecap":"square","stroke-width":"5",stroke:"current-color"},[e("path",{d:"M4 4l9.257 2.463L21.367 4l7.927 2.463L38.736 4l9.117 2.463L56.103 4l8.685 2.463L73.472 4l8.684 2.463L90.84 4l8.684 2.463L108.208 4l8.684 2.463L125.576 4l8.684 2.463L142.943 4M146.423 4l9.257 2.463"})],-1)]))}const z=O(ce,[["render",re]]),de={class:"card__form",method:"get"},ie={class:"card__inner"},_e={class:"card__color-bar"},ue={class:"card__textarea-wrap"},ve={class:"card__settings"},pe={class:"card__details"},ke={class:"card__dates"},he={class:"card__repeat-status"},fe={key:0,class:"card__repeat-days"},be={class:"card__repeat-days-inner"},me=["id","value","checked"],ge=["for","onClick"],ye={key:0,class:"card__date-status"},$e={key:1,class:"card__date-status"},Te={key:1,class:"card__date-deadline"},Se={class:"card__colors-inner"},Ce={class:"card__colors-wrap"},we=["id","value","checked"],De=["for","onClick"],xe={class:"error"},Le={class:"card__status-btns"},Ee=j({__name:"Form",props:{task:{type:Object,required:!1}},setup(i){var M,R,B,U;const t=i,p=N(),a=$(t.task||p.createNewTask()),r=$(Object.values(((M=a.value)==null?void 0:M.repeating_date)||{}).some(n=>n)),_=$(!!((R=a.value)!=null&&R.due_date)),u=$(""),f=$((B=t.task)!=null&&B.due_date?new Date((U=t.task)==null?void 0:U.due_date).getTime():new Date().getTime()),y=$({dateFormat:"M d, Y"}),{tasksListState:S}=A(p),l=D(()=>{const n=[];return n.push(`card--${a.value.color}`),r.value&&n.push("card--repeat"),n.join(" ")}),k=()=>{var d;const n=[];a.value.description||n.push("Пожалуйста, укажите название задачи"),r.value&&!Object.values((d=a.value)==null?void 0:d.repeating_date).some(o=>o)&&n.push("Пожалуйста, укажите дни повторения"),u.value=n.join(`
`)},m=()=>{k(),u.value||p.createEditTask({...a.value,due_date:_.value?f.value:null},a.value.id?E.put:E.post)},K=n=>{f.value=new Date(n[0]).getTime()},P=()=>{p.deleteTask(a.value.id)},Y=()=>{p.setTasksListState(void 0)};Q(()=>{var n;a.value.description&&(u.value=""),r.value&&Object.values((n=a.value)==null?void 0:n.repeating_date).some(d=>d)&&(u.value="")});const H=n=>{a.value.color=n},W=n=>{a.value.repeating_date[n]=!a.value.repeating_date[n]},G=()=>{r.value=!r.value,r.value?(_.value=!1,a.value.due_date=null):a.value.repeating_date={mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1,su:!1}},J=()=>{_.value=!_.value};return(n,d)=>(s(),c("article",{class:g(["card card--edit",l.value])},[e("form",de,[e("div",ie,[e("div",_e,[x(z)]),e("div",ue,[e("label",null,[X(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=o=>a.value.description=o),class:"card__text",placeholder:"Start typing your text here...",minlength:"1",maxlength:"120",name:"text"},null,512),[[Z,a.value.description]])])]),e("div",ve,[e("div",pe,[e("div",ke,[e("button",{class:"card__repeat-toggle",type:"button",onClick:G},[d[2]||(d[2]=q(" repeat:")),e("span",he,b(r.value?"yes":"no"),1)]),r.value?(s(),c("fieldset",fe,[e("div",be,[(s(!0),c(T,null,L(n.RepeatingDays,o=>{var F;return s(),c(T,{key:o},[e("input",{id:`repeat-${o}-4`,class:"visually-hidden card__repeat-day-input",type:"checkbox",name:"repeat",value:o,checked:(F=a.value)==null?void 0:F.repeating_date[o]},null,8,me),e("label",{class:"card__repeat-day",for:`repeat-${o}-4`,onClick:et=>W(o)},b(o),9,ge)],64)}),128))])])):h("",!0),e("button",{class:"card__date-deadline-toggle",type:"button",onClick:J},[d[3]||(d[3]=q(" date: ")),_.value?(s(),c("span",ye,"yes")):(s(),c("span",$e,"no"))]),_.value?(s(),c("fieldset",Te,[x(v(ne),{modelValue:f.value,"onUpdate:modelValue":d[1]||(d[1]=o=>f.value=o),config:y.value,class:"card__date","onOn-сlose":K},null,8,["modelValue","config"])])):h("",!0)])]),e("div",Se,[d[4]||(d[4]=e("h3",{class:"card__colors-title"},"Color",-1)),e("ul",Ce,[(s(!0),c(T,null,L(v(ee),o=>(s(),c("li",{key:o},[e("input",{id:`color-${o}-4`,type:"radio",class:g(`card__color-input card__color-input--${o} visually-hidden`),name:"color",value:`${o}`,checked:a.value.color===o},null,10,we),e("label",{for:`color-${o}-4`,class:g(`card__color card__color--${o}`),onClick:F=>H(o)},b(o),11,De)]))),128))])])]),e("p",xe,b(u.value),1),e("div",Le,[e("button",{class:"card__button card__button--save",type:"submit",onClick:w(m,["prevent"])},"save"),e("button",{class:"card__button card__button--cancel",onClick:w(Y,["prevent"])},"cancel"),v(S)!==null?(s(),c("button",{key:0,class:"card__button card__button--delete",onClick:w(P,["prevent"])},"delete")):h("",!0)])])])],2))}}),I=O(Ee,[["__scopeId","data-v-526d98bb"]]),Oe={class:"card__form"},je={class:"card__inner"},Ne={class:"card__control"},Ae={class:"card__color-bar"},Fe={class:"card__textarea-wrap"},Ve={class:"card__text"},Me={key:0,class:"card__days"},Re={key:1,class:"card__settings"},Be={class:"card__details"},Ue={class:"card__dates"},qe={class:"card__date-deadline"},ze={class:"card__input-deadline-wrap"},Ie={class:"card__date"},Ke=j({__name:"TaskCard",props:{task:{type:Object,required:!0}},setup(i){const t=i,p=l=>Object.values(l).some(k=>k),a=D(()=>{var l;return Object.entries((l=t.task)==null?void 0:l.repeating_date).reduce((k,m)=>(m[1]&&k.push(m[0]),k),[]).join(", ")}),r=N(),{tasksListState:_}=A(r),u=D(()=>{var k;const l=["card"];return t.task.color&&l.push(`card--${t.task.color}`),p((k=t.task)==null?void 0:k.repeating_date)&&l.push("card--repeat"),t.task.due_date&&te(t.task.due_date)&&l.push("card--deadline"),_.value&&_.value===t.task.id&&l.push("card--edit"),l.join(" ")}),f=()=>{r.setTasksListState(t.task.id)},y=()=>{r.createEditTask({...t.task,is_favorite:!t.task.is_favorite},E.put)},S=()=>{r.createEditTask({...t.task,is_archived:!t.task.is_archived},E.put)};return(l,k)=>{var m;return v(_)&&v(_)===i.task.id?(s(),C(I,{key:0,task:{...i.task}},null,8,["task"])):(s(),c("article",{key:1,class:g(u.value)},[e("div",Oe,[e("div",je,[e("div",Ne,[e("button",{type:"button",class:"card__btn card__btn--edit",onClick:f},"edit"),e("button",{type:"button",class:g({"card__btn card__btn--archive":!0,"card__btn--disabled":i.task.is_archived}),onClick:S},"archive",2),e("button",{type:"button",class:g({"card__btn card__btn--favorites":!0,"card__btn--disabled":i.task.is_favorite}),onClick:y},"favorites",2)]),e("div",Ae,[x(z)]),e("div",Fe,[e("p",Ve,b(i.task.description),1)]),p((m=t.task)==null?void 0:m.repeating_date)?(s(),c("div",Me,"Task repetition days: "+b(a.value),1)):h("",!0),i.task.due_date?(s(),c("div",Re,[e("div",Be,[e("div",Ue,[e("div",qe,[e("p",ze,[e("span",Ie,b(new Date(i.task.due_date).toLocaleString("en-US",v(ae))),1)])])])])])):h("",!0)])])],2))}}}),Pe={class:"board__filter-list"},Ye=["onClick"],He=j({__name:"HeaderSort",setup(i){const t=N(),{activeSort:p}=A(t),a=[{value:V.default,label:"SORT BY DEFAULT"},{value:V.up,label:"SORT BY DATE up"},{value:V.down,label:"SORT BY DATE down"}];return(r,_)=>(s(),c("nav",null,[e("ul",Pe,[(s(),c(T,null,L(a,u=>e("li",{key:u.value},[e("button",{class:g(["board__filter",{"board__filter--active":v(p)===u.value}]),onClick:w(f=>v(t).setActiveSort(u.value),["prevent"])},b(u.label),11,Ye)])),64))])]))}}),We=O(He,[["__scopeId","data-v-8698a20f"]]),Ge={},Je={class:"board__no-tasks"};function Qe(i,t){return s(),c("p",Je,"Click «ADD NEW TASK» in menu to create your first task")}const Xe=O(Ge,[["render",Qe]]),Ze={class:"board__tasks"},st=j({__name:"TasksView",setup(i){const t=N(),{tasksListState:p,paginatedTasks:a,isShowLoadMore:r}=A(t),_=D(()=>a.value.length===0&&p.value===void 0),u=()=>{console.log("ESC"),t.setTasksListState(void 0)};return(f,y)=>{const S=oe("notifications");return s(),c(T,null,[e("section",{class:"board container",onKeyup:se(u,["esc"])},[v(a).length?(s(),C(We,{key:0})):h("",!0),e("div",Ze,[v(p)===null?(s(),C(I,{key:0})):h("",!0),_.value?(s(),C(Xe,{key:1})):h("",!0),(s(!0),c(T,null,L(v(a),l=>(s(),C(Ke,{key:l.id,task:l},null,8,["task"]))),128))]),v(r)?(s(),c("button",{key:1,class:"load-more",type:"button",onClick:y[0]||(y[0]=(...l)=>v(t).updatePageSize&&v(t).updatePageSize(...l))}," load more ")):h("",!0)],32),x(S,{position:"top right"})],64)}}});export{st as default};
