import{_ as O,c,o as s,a as e,d as j,u as N,r as $,s as A,b as D,w as Q,n as y,e as x,f as X,v as Z,g as f,h as q,t as b,F as T,i as L,j as i,C as ee,k as w,A as E,l as te,m as C,D as ae,p as se,S as V,q as oe,x as ne}from"./index-B5l1asKz.js";import{C as ce}from"./flatpickr-BfUen2jr.js";const le={},re={class:"card__color-bar-wave",width:"100%",height:"10"};function de(_,t){return s(),c("svg",re,t[0]||(t[0]=[e("g",{fill:"none","fill-rule":"nonzero","stroke-linecap":"square","stroke-width":"5",stroke:"current-color"},[e("path",{d:"M4 4l9.257 2.463L21.367 4l7.927 2.463L38.736 4l9.117 2.463L56.103 4l8.685 2.463L73.472 4l8.684 2.463L90.84 4l8.684 2.463L108.208 4l8.684 2.463L125.576 4l8.684 2.463L142.943 4M146.423 4l9.257 2.463"})],-1)]))}const z=O(le,[["render",de]]),ie={class:"card__form",method:"get"},_e={class:"card__inner"},ue={class:"card__color-bar"},ve={class:"card__textarea-wrap"},pe={class:"card__settings"},ke={class:"card__details"},he={class:"card__dates"},fe={class:"card__repeat-status"},be={key:0,class:"card__repeat-days"},me={class:"card__repeat-days-inner"},ge=["id","value","checked"],ye=["for","onClick"],$e={key:0,class:"card__date-status"},Te={key:1,class:"card__date-status"},Se={key:1,class:"card__date-deadline"},Ce={class:"card__colors-inner"},we={class:"card__colors-wrap"},De=["id","value","checked"],xe=["for","onClick"],Le={class:"error"},Ee={class:"card__status-btns"},Oe=j({__name:"Form",props:{task:{type:Object,required:!1}},setup(_){var M,R,B,U;const t=_,u=N(),a=$(t.task||u.createNewTask()),r=$(Object.values(((M=a.value)==null?void 0:M.repeating_date)||{}).some(n=>n)),v=$(!!((R=a.value)!=null&&R.due_date)),k=$(""),p=$((B=t.task)!=null&&B.due_date?new Date((U=t.task)==null?void 0:U.due_date).getTime():new Date().getTime()),m=$({dateFormat:"M d, Y"}),{tasksListState:S}=A(u),l=D(()=>{const n=[];return n.push(`card--${a.value.color}`),r.value&&n.push("card--repeat"),n.join(" ")}),h=()=>{var d;const n=[];a.value.description||n.push("Пожалуйста, укажите название задачи"),r.value&&!Object.values((d=a.value)==null?void 0:d.repeating_date).some(o=>o)&&n.push("Пожалуйста, укажите дни повторения"),k.value=n.join(`
`)},g=()=>{h(),k.value||u.createEditTask({...a.value,due_date:v.value?p.value:null},a.value.id?E.put:E.post)},K=n=>{p.value=new Date(n[0]).getTime()},P=()=>{u.deleteTask(a.value.id)},Y=()=>{u.setTasksListState(void 0)};Q(()=>{var n;a.value.description&&(k.value=""),r.value&&Object.values((n=a.value)==null?void 0:n.repeating_date).some(d=>d)&&(k.value="")});const H=n=>{a.value.color=n},W=n=>{a.value.repeating_date[n]=!a.value.repeating_date[n]},G=()=>{r.value=!r.value,r.value?(v.value=!1,a.value.due_date=null):a.value.repeating_date={mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1,su:!1}},J=()=>{v.value=!v.value};return(n,d)=>(s(),c("article",{class:y(["card card--edit",l.value])},[e("form",ie,[e("div",_e,[e("div",ue,[x(z)]),e("div",ve,[e("label",null,[X(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=o=>a.value.description=o),class:"card__text",placeholder:"Start typing your text here...",minlength:"1",maxlength:"120",name:"text"},null,512),[[Z,a.value.description]])])]),e("div",pe,[e("div",ke,[e("div",he,[e("button",{class:"card__repeat-toggle",type:"button",onClick:G},[d[2]||(d[2]=q(" repeat:")),e("span",fe,b(r.value?"yes":"no"),1)]),r.value?(s(),c("fieldset",be,[e("div",me,[(s(!0),c(T,null,L(n.RepeatingDays,o=>{var F;return s(),c(T,{key:o},[e("input",{id:`repeat-${o}-4`,class:"visually-hidden card__repeat-day-input",type:"checkbox",name:"repeat",value:o,checked:(F=a.value)==null?void 0:F.repeating_date[o]},null,8,ge),e("label",{class:"card__repeat-day",for:`repeat-${o}-4`,onClick:tt=>W(o)},b(o),9,ye)],64)}),128))])])):f("",!0),e("button",{class:"card__date-deadline-toggle",type:"button",onClick:J},[d[3]||(d[3]=q(" date: ")),v.value?(s(),c("span",$e,"yes")):(s(),c("span",Te,"no"))]),v.value?(s(),c("fieldset",Se,[x(i(ce),{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=o=>p.value=o),config:m.value,class:"card__date","onOn-сlose":K},null,8,["modelValue","config"])])):f("",!0)])]),e("div",Ce,[d[4]||(d[4]=e("h3",{class:"card__colors-title"},"Color",-1)),e("ul",we,[(s(!0),c(T,null,L(i(ee),o=>(s(),c("li",{key:o},[e("input",{id:`color-${o}-4`,type:"radio",class:y(`card__color-input card__color-input--${o} visually-hidden`),name:"color",value:`${o}`,checked:a.value.color===o},null,10,De),e("label",{for:`color-${o}-4`,class:y(`card__color card__color--${o}`),onClick:F=>H(o)},b(o),11,xe)]))),128))])])]),e("p",Le,b(k.value),1),e("div",Ee,[e("button",{class:"card__button card__button--save",type:"submit",onClick:w(g,["prevent"])},"save"),e("button",{class:"card__button card__button--cancel",onClick:w(Y,["prevent"])},"cancel"),i(S)!==null?(s(),c("button",{key:0,class:"card__button card__button--delete",onClick:w(P,["prevent"])},"delete")):f("",!0)])])])],2))}}),I=O(Oe,[["__scopeId","data-v-0aaab4df"]]),je={class:"card__form"},Ne={class:"card__inner"},Ae={class:"card__control"},Fe={class:"card__color-bar"},Ve={class:"card__textarea-wrap"},Me={class:"card__text"},Re={key:0,class:"card__days"},Be={key:1,class:"card__settings"},Ue={class:"card__details"},qe={class:"card__dates"},ze={class:"card__date-deadline"},Ie={class:"card__input-deadline-wrap"},Ke={class:"card__date"},Pe=j({__name:"TaskCard",props:{task:{type:Object,required:!0}},setup(_){const t=_,u=l=>Object.values(l).some(h=>h),a=D(()=>{var l;return Object.entries((l=t.task)==null?void 0:l.repeating_date).reduce((h,g)=>(g[1]&&h.push(g[0]),h),[]).join(", ")}),r=N(),{tasksListState:v}=A(r),k=D(()=>{var h;const l=["card"];return t.task.color&&l.push(`card--${t.task.color}`),u((h=t.task)==null?void 0:h.repeating_date)&&l.push("card--repeat"),t.task.due_date&&te(t.task.due_date)&&l.push("card--deadline"),v.value&&v.value===t.task.id&&l.push("card--edit"),l.join(" ")}),p=()=>{r.setTasksListState(t.task.id)},m=()=>{r.createEditTask({...t.task,is_favorite:!t.task.is_favorite},E.put)},S=()=>{r.createEditTask({...t.task,is_archived:!t.task.is_archived},E.put)};return(l,h)=>{var g;return i(v)&&i(v)===_.task.id?(s(),C(I,{key:0,task:{..._.task}},null,8,["task"])):(s(),c("article",{key:1,class:y(k.value)},[e("div",je,[e("div",Ne,[e("div",Ae,[e("button",{type:"button",class:"card__btn card__btn--edit",onClick:p},"edit"),e("button",{type:"button",class:y({"card__btn card__btn--archive":!0,"card__btn--disabled":_.task.is_archived}),onClick:S},"archive",2),e("button",{type:"button",class:y({"card__btn card__btn--favorites":!0,"card__btn--disabled":_.task.is_favorite}),onClick:m},"favorites",2)]),e("div",Fe,[x(z)]),e("div",Ve,[e("p",Me,b(_.task.description),1)]),u((g=t.task)==null?void 0:g.repeating_date)?(s(),c("div",Re,"Task repetition days: "+b(a.value),1)):f("",!0),_.task.due_date?(s(),c("div",Be,[e("div",Ue,[e("div",qe,[e("div",ze,[e("p",Ie,[e("span",Ke,b(new Date(_.task.due_date).toLocaleString("en-US",i(ae))),1)])])])])])):f("",!0)])])],2))}}}),Ye={class:"board__filter-list"},He=["onClick"],We=j({__name:"HeaderSort",setup(_){const{t}=se(),u=N(),{activeSort:a}=A(u),r=[{value:V.default,label:"SORT BY DEFAULT"},{value:V.up,label:"SORT BY DATE up"},{value:V.down,label:"SORT BY DATE down"}];return(v,k)=>(s(),c("nav",null,[e("ul",Ye,[(s(),c(T,null,L(r,p=>e("li",{key:p.value},[e("button",{class:y(["board__filter",{"board__filter--active":i(a)===p.value}]),onClick:w(m=>i(u).setActiveSort(p.value),["prevent"])},b(i(t)(`sorts.${p.value}`)),11,He)])),64))])]))}}),Ge=O(We,[["__scopeId","data-v-db54acde"]]),Je={},Qe={class:"board__no-tasks"};function Xe(_,t){return s(),c("p",Qe,"Click «ADD NEW TASK» in menu to create your first task")}const Ze=O(Je,[["render",Xe]]),et={class:"board__tasks"},ot=j({__name:"TasksView",setup(_){const t=N(),{tasksListState:u,paginatedTasks:a,isShowLoadMore:r}=A(t),v=D(()=>a.value.length===0&&u.value===void 0),k=()=>{console.log("ESC"),t.setTasksListState(void 0)};return(p,m)=>{const S=ne("notifications");return s(),c(T,null,[e("section",{class:"board container",onKeyup:oe(k,["esc"])},[i(a).length?(s(),C(Ge,{key:0})):f("",!0),e("div",et,[i(u)===null?(s(),C(I,{key:0})):f("",!0),v.value?(s(),C(Ze,{key:1})):f("",!0),(s(!0),c(T,null,L(i(a),l=>(s(),C(Pe,{key:l.id,task:l},null,8,["task"]))),128))]),i(r)?(s(),c("button",{key:1,class:"load-more",type:"button",onClick:m[0]||(m[0]=(...l)=>i(t).updatePageSize&&i(t).updatePageSize(...l))}," load more ")):f("",!0)],32),x(S,{position:"top right"})],64)}}});export{ot as default};
