import{_ as V,c as r,o as a,a as e,d as N,u as E,b as O,r as w,e as S,f as K,s as L,w as se,n as $,g as T,h as ae,v as oe,i as t,j as k,k as H,t as d,F as j,l as F,L as ce,R as P,m as ne,C as re,p as R,A as M,q as le,x as D,I as B,y as de,S as ie,z as _e,B as ue}from"./index-CSGFngTx.js";import{C as ve}from"./flatpickr-DZtRZFwy.js";const he={},pe={class:"card__color-bar-wave",width:"100%",height:"10"};function ke(_,o){return a(),r("svg",pe,o[0]||(o[0]=[e("g",{fill:"none","fill-rule":"nonzero","stroke-linecap":"square","stroke-width":"5",stroke:"current-color"},[e("path",{d:"M4 4l9.257 2.463L21.367 4l7.927 2.463L38.736 4l9.117 2.463L56.103 4l8.685 2.463L73.472 4l8.684 2.463L90.84 4l8.684 2.463L108.208 4l8.684 2.463L125.576 4l8.684 2.463L142.943 4M146.423 4l9.257 2.463"})],-1)]))}const U=V(he,[["render",ke]]),fe={class:"card__form",method:"get"},me={class:"card__inner"},ge={class:"card__color-bar"},be={class:"card__textarea-wrap"},ye=["placeholder"],$e={class:"card__settings"},Ce={class:"card__details"},Te={class:"card__dates"},Se={class:"card__repeat-status"},Le={key:1,class:"card__repeat-days"},xe={class:"card__repeat-days-inner"},we=["onClick"],De={class:"card__date-status"},je={key:3,class:"card__date-deadline"},Ne={class:"card__colors-inner"},Ee={class:"card__colors-title"},Re={class:"card__colors-wrap"},Fe=["id","value","checked"],Me=["for","onClick"],Oe={class:"error"},Ie={class:"card__status-btns"},ze=N({__name:"Form",props:{task:{type:Object,required:!1}},setup(_){var q,A;const o=_,{t:c}=E(),u=O(),s=w(o.task||u.createNewTask()),i=w(Object.values(((q=s.value)==null?void 0:q.repeating_date)||{}).some(n=>n)),f=S(()=>i.value?"yes":"no"),m=S(()=>s.value.due_date?"yes":"no"),h=w(""),g=w(((A=o.task)==null?void 0:A.due_date)??Date.now()),x=K(),{currentLanguage:b}=L(x),I=w({enableTime:!1,dateFormat:"Z",altInput:!0,altFormat:"M d, Y",defaultDate:g.value}),{tasksListState:v}=L(u),p=S(()=>{const n=[];return n.push(`card--${s.value.color}`),i.value&&n.push("card--repeat"),n.join(" ")}),y=n=>{n.length&&(g.value=n[0].getTime())},Y=()=>{var C;const n=[];s.value.description||n.push(c("errors.errorTaskNoName")),i.value&&!Object.values((C=s.value)==null?void 0:C.repeating_date).some(l=>l)&&n.push(c("errors.errorTaskNoRepeat")),h.value=n.join(`
`)},Z=()=>{Y(),h.value||u.createEditTask({...s.value,due_date:g.value},s.value.id?M.put:M.post)},G=()=>{u.deleteTask(s.value.id)},J=()=>{u.setTasksListState(void 0)};se(()=>{var n;s.value.description&&(h.value=""),i.value&&Object.values((n=s.value)==null?void 0:n.repeating_date).some(C=>C)&&(h.value="")});const Q=n=>{s.value.color=n},X=n=>{s.value.repeating_date[n]=!s.value.repeating_date[n]},ee=()=>{i.value=!i.value,i.value?s.value.due_date=null:s.value.repeating_date={mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1,su:!1}},te=()=>{s.value.due_date=!s.value.due_date};return(n,C)=>(a(),r("article",{class:$(["card card--edit",p.value])},[e("form",fe,[e("div",me,[e("div",ge,[T(U)]),e("div",be,[e("label",null,[ae(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=l=>s.value.description=l),class:"card__text",placeholder:t(c)("form.placeholder"),minlength:"1",maxlength:"120",name:"text"},null,8,ye),[[oe,s.value.description]])])]),e("div",$e,[e("div",Ce,[e("div",Te,[s.value.due_date?k("",!0):(a(),r("button",{key:0,class:"card__repeat-toggle",type:"button",onClick:ee},[H(d(t(c)("form.repeat"))+" ",1),e("span",Se,d(t(c)(`form.${f.value}`)),1)])),i.value?(a(),r("fieldset",Le,[e("ul",xe,[(a(!0),r(j,null,F(t(ne),l=>{var z;return a(),r("li",{key:l,class:$(["card__repeat-days-item",{"card__repeat-days-item--active":(z=s.value)==null?void 0:z.repeating_date[l]}]),onClick:nt=>X(l)},d(t(b)===t(ce).en?l:t(P)[l]),11,we)}),128))])])):k("",!0),i.value?k("",!0):(a(),r("button",{key:2,class:"card__date-deadline-toggle",type:"button",onClick:te},[H(d(t(c)("form.date"))+" ",1),e("span",De,d(t(c)(`form.${m.value}`)),1)])),s.value.due_date?(a(),r("fieldset",je,[T(t(ve),{value:g.value,config:I.value,class:"card__date",onOnChange:y},null,8,["value","config"])])):k("",!0)])]),e("div",Ne,[e("h3",Ee,d(t(c)("form.color")),1),e("ul",Re,[(a(!0),r(j,null,F(t(re),l=>(a(),r("li",{key:l},[e("input",{id:`color-${l}-4`,type:"radio",class:$(`card__color-input card__color-input--${l} visually-hidden`),name:"color",value:`${l}`,checked:s.value.color===l},null,10,Fe),e("label",{for:`color-${l}-4`,class:$(`card__color card__color--${l}`),onClick:z=>Q(l)},d(l),11,Me)]))),128))])])]),e("p",Oe,d(h.value),1),e("div",Ie,[e("button",{class:"card__button card__button--save",type:"submit",onClick:R(Z,["prevent"])},d(t(c)("form.save")),1),e("button",{class:"card__button card__button--cancel",onClick:R(J,["prevent"])},d(t(c)("form.cancel")),1),t(v)!==null?(a(),r("button",{key:0,class:"card__button card__button--delete",onClick:R(G,["prevent"])},d(t(c)("form.delete")),1)):k("",!0)])])])],2))}}),W=V(ze,[["__scopeId","data-v-714926bd"]]),Be={class:"card__form"},Ve={class:"card__inner"},qe={class:"card__control"},Ae={class:"card__color-bar"},He={class:"card__textarea-wrap"},Ke={class:"card__text"},Pe={key:0,class:"card__days"},Ue={key:1,class:"card__settings"},We={class:"card__details"},Ye={class:"card__dates"},Ze={class:"card__date-deadline"},Ge={class:"card__input-deadline-wrap"},Je={class:"card__date"},Qe=N({__name:"TaskCard",props:{task:{type:Object,required:!0}},setup(_){const o=_,{t:c}=E(),u=v=>Object.values(v).some(p=>p),s=K(),{currentLanguage:i}=L(s),f=S(()=>{var v;return Object.entries((v=o.task)==null?void 0:v.repeating_date).reduce((p,y)=>(y[1]&&(i.value==="ru"?p.push(P[y[0]]):p.push(y[0])),p),[]).join(", ")}),m=O(),{tasksListState:h}=L(m),g=S(()=>{var p;const v=["card"];return o.task.color&&v.push(`card--${o.task.color}`),u((p=o.task)==null?void 0:p.repeating_date)&&v.push("card--repeat"),o.task.due_date&&le(o.task.due_date)&&v.push("card--deadline"),h.value&&h.value===o.task.id&&v.push("card--edit"),v.join(" ")}),x=()=>{m.setTasksListState(o.task.id)},b=()=>{m.createEditTask({...o.task,is_favorite:!o.task.is_favorite},M.put)},I=()=>{m.createEditTask({...o.task,is_archived:!o.task.is_archived},M.put)};return(v,p)=>{var y;return t(h)&&t(h)===_.task.id?(a(),D(W,{key:0,task:{..._.task}},null,8,["task"])):(a(),r("article",{key:1,class:$(g.value)},[e("div",Be,[e("div",Ve,[e("div",qe,[T(t(B),{icon:"line-md:edit",width:"24",height:"24",class:"card__btn card__btn--edit",onClick:x}),T(t(B),{icon:"line-md:folder-check",width:"24",class:$({"card__btn card__btn--archive":!0,"card__btn--disabled":_.task.is_archived}),height:"24",onClick:I},null,8,["class"]),T(t(B),{icon:"line-md:heart",width:"24",height:"24",onClick:b,class:$({"card__btn card__btn--favorites":!0,"card__btn--disabled":_.task.is_favorite})},null,8,["class"])]),e("div",Ae,[T(U)]),e("div",He,[e("p",Ke,d(_.task.description),1)]),u((y=o.task)==null?void 0:y.repeating_date)?(a(),r("div",Pe,d(t(c)("tasks.repetitionDays",{days:f.value})),1)):k("",!0),_.task.due_date?(a(),r("div",Ue,[e("div",We,[e("div",Ye,[e("div",Ze,[e("p",Ge,[e("span",Je,d(t(de)(_.task.due_date,t(i))),1)])])])])])):k("",!0)])])],2))}}}),Xe={class:"board__filter-list"},et=["onClick"],tt=N({__name:"HeaderSort",setup(_){const{t:o}=E(),c=O(),{activeSort:u}=L(c);return(s,i)=>(a(),r("nav",null,[e("ul",Xe,[(a(!0),r(j,null,F(t(ie),f=>(a(),r("li",{key:f},[e("button",{class:$(["board__filter",{"board__filter--active":t(u)===f}]),onClick:R(m=>t(c).setActiveSort(f),["prevent"])},d(t(o)(`sorts.${f}`)),11,et)]))),128))])]))}}),st=V(tt,[["__scopeId","data-v-0c9f0490"]]),at={class:"board__no-tasks"},ot=N({__name:"NoTasks",setup(_){const{t:o}=E();return(c,u)=>(a(),r("p",at,d(t(o)("tasks.noTasks")),1))}}),ct={class:"board__tasks"},dt=N({__name:"Tasks",setup(_){const{t:o}=E(),c=O(),{tasksListState:u,paginatedTasks:s,isShowLoadMore:i}=L(c),f=S(()=>s.value.length===0&&u.value===void 0),m=()=>{c.setTasksListState(void 0)};return(h,g)=>{const x=ue("notifications");return a(),r(j,null,[e("section",{class:"board container",onKeyup:_e(m,["esc"])},[t(s).length?(a(),D(st,{key:0})):k("",!0),e("div",ct,[t(u)===null?(a(),D(W,{key:0})):k("",!0),f.value?(a(),D(ot,{key:1})):k("",!0),(a(!0),r(j,null,F(t(s),b=>(a(),D(Qe,{key:b.id,task:b},null,8,["task"]))),128))]),t(i)?(a(),r("button",{key:1,class:"load-more",type:"button",onClick:g[0]||(g[0]=(...b)=>t(c).updatePageSize&&t(c).updatePageSize(...b))},d(t(o)("tasks.loadMore")),1)):k("",!0)],32),T(x,{position:"top right"})],64)}}});export{dt as default};
