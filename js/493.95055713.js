"use strict";(self["webpackChunktask_manager"]=self["webpackChunktask_manager"]||[]).push([[493],{493:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ce}});var s=t(641),l=t(751),r=t(953),c=t(33),d=t(585),n=t(312),u=t(810),o=t(320),i=t(218);const _={class:"card__color-bar-wave",width:"100%",height:"10"};function k(e,a){return(0,s.uX)(),(0,s.CE)("svg",_,a[0]||(a[0]=[(0,s.Lk)("g",{fill:"none","fill-rule":"nonzero","stroke-linecap":"square","stroke-width":"5",stroke:"current-color"},[(0,s.Lk)("path",{d:"M4 4l9.257 2.463L21.367 4l7.927 2.463L38.736 4l9.117 2.463L56.103 4l8.685 2.463L73.472 4l8.684 2.463L90.84 4l8.684 2.463L108.208 4l8.684 2.463L125.576 4l8.684 2.463L142.943 4M146.423 4l9.257 2.463"})],-1)]))}var v=t(262);const p={},b=(0,v.A)(p,[["render",k]]);var L=b,C=t(105);const y={class:"card__form",method:"get"},g={class:"card__inner"},h={class:"card__color-bar"},f={class:"card__textarea-wrap"},m={class:"card__settings"},E={class:"card__details"},R={class:"card__dates"},X={class:"card__repeat-status"},S={key:0,class:"card__repeat-days"},T={class:"card__repeat-days-inner"},w=["id","value","checked"],D=["for","onClick"],K={key:0,class:"card__date-status"},F={key:1,class:"card__date-status"},$={key:1,class:"card__date-deadline"},j={class:"card__colors-inner"},W={class:"card__colors-wrap"},A=["id","value","checked"],O=["for","onClick"],x={class:"error"},M={class:"card__status-btns"};var Q=(0,s.pM)({__name:"Form",props:{task:{type:Object,required:!1}},setup(e){const a=e,t=(0,d.d)(),n=(0,r.KR)(a.task||t.createNewTask()),i=(0,r.KR)(Object.values(n.value?.repeating_date||{}).some((e=>e))),_=(0,r.KR)(!!n.value?.due_date),k=(0,r.KR)(""),v=(0,r.KR)(a.task?.due_date?new Date(a.task?.due_date).getTime():(new Date).getTime()),p=(0,r.KR)({dateFormat:"M d, Y"}),{tasksListState:b}=(0,u.bP)(t),Q=(0,s.EW)((()=>{const e=[];return e.push(`card--${n.value.color}`),i.value&&e.push("card--repeat"),e.join(" ")})),I=()=>{const e=[];n.value.description||e.push("Пожалуйста, укажите название задачи"),i.value&&!Object.values(n.value?.repeating_date).some((e=>e))&&e.push("Пожалуйста, укажите дни повторения"),k.value=e.join("\n")},P=()=>{I(),k.value||t.createEditTask({...n.value,due_date:_.value?v.value:null},n.value.id?o.s0.put:o.s0.post)},V=e=>{v.value=new Date(e[0]).getTime()},B=()=>{t.deleteTask(n.value.id)},H=()=>{t.setTasksListState(void 0)};(0,s.nT)((()=>{n.value.description&&(k.value=""),i.value&&Object.values(n.value?.repeating_date).some((e=>e))&&(k.value="")}));const U=e=>{n.value.color=e},Y=e=>{n.value.repeating_date[e]=!n.value.repeating_date[e]},q=()=>{i.value=!i.value,i.value?(_.value=!1,n.value.due_date=null):n.value.repeating_date={mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1,su:!1}},z=()=>{_.value=!_.value};return(e,a)=>((0,s.uX)(),(0,s.CE)("article",{class:(0,c.C4)(["card card--edit",Q.value])},[(0,s.Lk)("form",y,[(0,s.Lk)("div",g,[(0,s.Lk)("div",h,[(0,s.bF)(L)]),(0,s.Lk)("div",f,[(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.description=e),class:"card__text",placeholder:"Start typing your text here...",minlength:"1",maxlength:"120",name:"text"},null,512),[[l.Jo,n.value.description]])])]),(0,s.Lk)("div",m,[(0,s.Lk)("div",E,[(0,s.Lk)("div",R,[(0,s.Lk)("button",{class:"card__repeat-toggle",type:"button",onClick:q},[a[2]||(a[2]=(0,s.eW)(" repeat:")),(0,s.Lk)("span",X,(0,c.v_)(i.value?"yes":"no"),1)]),i.value?((0,s.uX)(),(0,s.CE)("fieldset",S,[(0,s.Lk)("div",T,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.RepeatingDays,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},[(0,s.Lk)("input",{id:`repeat-${e}-4`,class:"visually-hidden card__repeat-day-input",type:"checkbox",name:"repeat",value:e,checked:n.value?.repeating_date[e]},null,8,w),(0,s.Lk)("label",{class:"card__repeat-day",for:`repeat-${e}-4`,onClick:a=>Y(e)},(0,c.v_)(e),9,D)],64)))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"card__date-deadline-toggle",type:"button",onClick:z},[a[3]||(a[3]=(0,s.eW)(" date: ")),_.value?((0,s.uX)(),(0,s.CE)("span",K,"yes")):((0,s.uX)(),(0,s.CE)("span",F,"no"))]),_.value?((0,s.uX)(),(0,s.CE)("fieldset",$,[(0,s.bF)((0,r.R1)(C.A),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),config:p.value,class:"card__date","onOn-сlose":V},null,8,["modelValue","config"])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",j,[a[4]||(a[4]=(0,s.Lk)("h3",{class:"card__colors-title"},"Color",-1)),(0,s.Lk)("ul",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(o.Jy),(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},[(0,s.Lk)("input",{id:`color-${e}-4`,type:"radio",class:(0,c.C4)(`card__color-input card__color-input--${e} visually-hidden`),name:"color",value:`${e}`,checked:n.value.color===e},null,10,A),(0,s.Lk)("label",{for:`color-${e}-4`,class:(0,c.C4)(`card__color card__color--${e}`),onClick:a=>U(e)},(0,c.v_)(e),11,O)])))),128))])])]),(0,s.Lk)("p",x,(0,c.v_)(k.value),1),(0,s.Lk)("div",M,[(0,s.Lk)("button",{class:"card__button card__button--save",type:"submit",onClick:(0,l.D$)(P,["prevent"])},"save"),(0,s.Lk)("button",{class:"card__button card__button--cancel",onClick:(0,l.D$)(H,["prevent"])},"cancel"),null!==(0,r.R1)(b)?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"card__button card__button--delete",onClick:(0,l.D$)(B,["prevent"])},"delete")):(0,s.Q3)("",!0)])])])],2))}});const I=(0,v.A)(Q,[["__scopeId","data-v-50cf24a2"]]);var P=I;const V={class:"card__form"},B={class:"card__inner"},H={class:"card__control"},U={class:"card__color-bar"},Y={class:"card__textarea-wrap"},q={class:"card__text"},z={key:0,class:"card__days"},J={key:1,class:"card__settings"},N={class:"card__details"},G={class:"card__dates"},Z={class:"card__date-deadline"},ee={class:"card__input-deadline-wrap"},ae={class:"card__date"};var te=(0,s.pM)({__name:"TaskCard",props:{task:{type:Object,required:!0}},setup(e){const a=e,t=e=>Object.values(e).some((e=>e)),l=(0,s.EW)((()=>Object.entries(a.task?.repeating_date).reduce(((e,a)=>(a[1]&&e.push(a[0]),e)),[]).join(", "))),_=(0,d.d)(),{tasksListState:k}=(0,u.bP)(_),v=(0,s.EW)((()=>{const e=["card"];return a.task.color&&e.push(`card--${a.task.color}`),t(a.task?.repeating_date)&&e.push("card--repeat"),a.task.due_date&&(0,n.Bc)(a.task.due_date)&&e.push("card--deadline"),k.value&&k.value===a.task.id&&e.push("card--edit"),e.join(" ")})),p=()=>{_.setTasksListState(a.task.id)},b=()=>{_.createEditTask({...a.task,is_favorite:!a.task.is_favorite},o.s0.put)},C=()=>{_.createEditTask({...a.task,is_archived:!a.task.is_archived},o.s0.put)};return(d,n)=>(0,r.R1)(k)&&(0,r.R1)(k)===e.task.id?((0,s.uX)(),(0,s.Wv)(P,{key:0,task:{...e.task}},null,8,["task"])):((0,s.uX)(),(0,s.CE)("article",{key:1,class:(0,c.C4)(v.value)},[(0,s.Lk)("div",V,[(0,s.Lk)("div",B,[(0,s.Lk)("div",H,[(0,s.Lk)("button",{type:"button",class:"card__btn card__btn--edit",onClick:p},"edit"),(0,s.Lk)("button",{type:"button",class:(0,c.C4)({"card__btn card__btn--archive":!0,"card__btn--disabled":e.task.is_archived}),onClick:C},"archive",2),(0,s.Lk)("button",{type:"button",class:(0,c.C4)({"card__btn card__btn--favorites":!0,"card__btn--disabled":e.task.is_favorite}),onClick:b},"favorites",2)]),(0,s.Lk)("div",U,[(0,s.bF)(L)]),(0,s.Lk)("div",Y,[(0,s.Lk)("p",q,(0,c.v_)(e.task.description),1)]),t(a.task?.repeating_date)?((0,s.uX)(),(0,s.CE)("div",z,"Task repetition days: "+(0,c.v_)(l.value),1)):(0,s.Q3)("",!0),e.task.due_date?((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",N,[(0,s.Lk)("div",G,[(0,s.Lk)("div",Z,[(0,s.Lk)("p",ee,[(0,s.Lk)("span",ae,(0,c.v_)(new Date(e.task.due_date).toLocaleString("en-US",(0,r.R1)(i.MD))),1)])])])])])):(0,s.Q3)("",!0)])])],2))}});const se=te;var le=se;const re={class:"board__filter-list"},ce=["onClick"];var de=(0,s.pM)({__name:"HeaderSort",setup(e){const a=(0,d.d)(),{activeSort:t}=(0,u.bP)(a),n=[{value:o.SH.default,label:"SORT BY DEFAULT"},{value:o.SH.up,label:"SORT BY DATE up"},{value:o.SH.down,label:"SORT BY DATE down"}];return(e,d)=>((0,s.uX)(),(0,s.CE)("nav",null,[(0,s.Lk)("ul",re,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(n,(e=>(0,s.Lk)("li",{key:e.value},[(0,s.Lk)("button",{class:(0,c.C4)(["board__filter",{"board__filter--active":(0,r.R1)(t)===e.value}]),onClick:(0,l.D$)((t=>(0,r.R1)(a).setActiveSort(e.value)),["prevent"])},(0,c.v_)(e.label),11,ce)]))),64))])]))}});const ne=(0,v.A)(de,[["__scopeId","data-v-14fee5e2"]]);var ue=ne;const oe={class:"board__no-tasks"};function ie(e,a){return(0,s.uX)(),(0,s.CE)("p",oe,"Click «ADD NEW TASK» in menu to create your first task")}const _e={},ke=(0,v.A)(_e,[["render",ie]]);var ve=ke;const pe={class:"board__tasks"};var be=(0,s.pM)({__name:"TasksView",setup(e){const a=(0,d.d)(),{tasksListState:t,paginatedTasks:c,isShowLoadMore:n}=(0,u.bP)(a),o=(0,s.EW)((()=>0===c.value.length&&void 0===t.value)),i=()=>{console.log("ESC"),a.setTasksListState(void 0)};return(e,d)=>{const u=(0,s.g2)("notifications");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("section",{class:"board container",onKeyup:(0,l.jR)(i,["esc"])},[(0,r.R1)(c).length?((0,s.uX)(),(0,s.Wv)(ue,{key:0})):(0,s.Q3)("",!0),(0,s.Lk)("div",pe,[null===(0,r.R1)(t)?((0,s.uX)(),(0,s.Wv)(P,{key:0})):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.Wv)(ve,{key:1})):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(c),(e=>((0,s.uX)(),(0,s.Wv)(le,{key:e.id,task:e},null,8,["task"])))),128))]),(0,r.R1)(n)?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"load-more",type:"button",onClick:d[0]||(d[0]=(...e)=>(0,r.R1)(a).updatePageSize&&(0,r.R1)(a).updatePageSize(...e))}," load more ")):(0,s.Q3)("",!0)],32),(0,s.bF)(u,{position:"top right"})],64)}}});const Le=be;var Ce=Le}}]);
//# sourceMappingURL=493.95055713.js.map